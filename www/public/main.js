
//
var andorra = {name: 'Andorra', flag: 'flag_images/ad.png'};
var unitedarabemirates = {name: 'United Arab Emirates', flag: 'flag_images/ae.png'};
var afghanistan = {name: 'Afghanistan', flag: 'flag_images/af.png'};
var antiguaandbarbuda = {name: 'Antigua and Barbuda', flag: 'flag_images/ag.png'};
var anguilla = {name: 'Anguilla', flag: 'flag_images/ai.png'};
var albania = {name: 'Albania', flag: 'flag_images/al.png'};
var armenia = {name: 'Armenia', flag: 'flag_images/am.png'};
var angola = {name: 'Angola', flag: 'flag_images/ao.png'};
var antarctica = {name: 'Antarctica', flag: 'flag_images/aq.png'};
var argentina = {name: 'Argentina', flag: 'flag_images/ar.png'};
var americansamoa = {name: 'American Samoa', flag: 'flag_images/as.png'};
var austria = {name: 'Austria', flag: 'flag_images/at.png'};
var australia = {name: 'Australia', flag: 'flag_images/au.png'};
var aruba = {name: 'Aruba', flag: 'flag_images/aw.png'};
var faroeislands = {name: 'Faroe Islands', flag: 'flag_images/ax.png'};
var azerbaijan = {name: 'Azerbaijan', flag: 'flag_images/az.png'};
var bosniaandherzegovina = {name: 'Bosnia and Herzegovina', flag: 'flag_images/ba.png'};
var barbados = {name: 'Barbados', flag: 'flag_images/bb.png'};
var bangladesh = {name: 'Bangladesh', flag: 'flag_images/bd.png'};
var belgium = {name: 'Belgium', flag: 'flag_images/be.png'};
var burkinafaso = {name: 'Burkina Faso', flag: 'flag_images/bf.png'};
var bulgaria = {name: 'Bulgaria', flag: 'flag_images/bg.png'};
var bahrain = {name: 'Bahrain', flag: 'flag_images/bh.png'};
var burundi = {name: 'Burundi', flag: 'flag_images/bi.png'};
var benin = {name: 'Benin', flag: 'flag_images/bj.png'};
var saintbarthélemy = {name: 'Saint Barthélemy', flag: 'flag_images/bl.png'};
var bermuda = {name: 'Bermuda', flag: 'flag_images/bm.png'};
var brunei = {name: 'Brunei', flag: 'flag_images/bn.png'};
var bolivia = {name: 'Bolivia', flag: 'flag_images/bo.png'};
var caribbeannetherlands = {name: 'Caribbean Netherlands', flag: 'flag_images/bq.png'};
var brazil = {name: 'Brazil', flag: 'flag_images/br.png'};
var bahamas = {name: 'Bahamas', flag: 'flag_images/bs.png'};
var bhutan = {name: 'Bhutan', flag: 'flag_images/bt.png'};
// var bouvetisland = {name: 'Bouvet Island', flag: 'flag_images/bv.png'};
var botswana = {name: 'Botswana', flag: 'flag_images/bw.png'};
var belarus = {name: 'Belarus', flag: 'flag_images/by.png'};
var belize = {name: 'Belize', flag: 'flag_images/bz.png'};
var canada = {name: 'Canada', flag: 'flag_images/ca.png'};
var cocosisland = {name: 'Cocos Island', flag: 'flag_images/cc.png'};
var drc = {name: 'DRC', flag: 'flag_images/cd.png'};
var centralafricanrepublic = {name: 'Central African Republic', flag: 'flag_images/cf.png'};
var republicofthecongo = {name: 'Republic of the Congo', flag: 'flag_images/cg.png'};
var switzerland = {name: 'Switzerland', flag: 'flag_images/ch.png'};
var cotedivoire = {name: 'Cote dIvoire', flag: 'flag_images/ci.png'};
var cookislands = {name: 'Cook Islands', flag: 'flag_images/ck.png'};
var chile = {name: 'Chile', flag: 'flag_images/cl.png'};
var cameroon = {name: 'Cameroon', flag: 'flag_images/cm.png'};
var china = {name: 'China', flag: 'flag_images/cn.png'};
var colombia = {name: 'Colombia', flag: 'flag_images/co.png'};
var costarica = {name: 'Costa Rica', flag: 'flag_images/cr.png'};
var cuba = {name: 'Cuba', flag: 'flag_images/cu.png'};
var capeverde = {name: 'Cape Verde', flag: 'flag_images/cv.png'};
var curaca = {name: 'Curaca', flag: 'flag_images/cw.png'};
var christmasisland = {name: 'Christmas Island', flag: 'flag_images/cx.png'};
var cyprus = {name: 'Cyprus', flag: 'flag_images/cy.png'};
var czechrepublic = {name: 'Czech Republic', flag: 'flag_images/cz.png'};
var germany = {name: 'Germany', flag: 'flag_images/de.png'};
var djibouti = {name: 'Djibouti', flag: 'flag_images/dj.png'};
var denmark = {name: 'Denmark', flag: 'flag_images/dk.png'};
var dominica = {name: 'Dominica', flag: 'flag_images/dm.png'};
var dominicanrepublic = {name: 'Dominican Republic', flag: 'flag_images/do.png'};
var algeria = {name: 'Algeria', flag: 'flag_images/dz.png'};
var ecuador = {name: 'Ecuador', flag: 'flag_images/ec.png'};
var estonia = {name: 'Estonia', flag: 'flag_images/ee.png'};
var egypt = {name: 'Egypt', flag: 'flag_images/eg.png'};
var westernsahara = {name: 'Western Sahara', flag: 'flag_images/eh.png'};
var eritrea = {name: 'Eritrea', flag: 'flag_images/er.png'};
var spain = {name: 'Spain', flag: 'flag_images/es.png'};
var ethiopia = {name: 'Ethiopia', flag: 'flag_images/et.png'};
var europe = {name: 'Europe', flag: 'flag_images/eu.png'};
var finland = {name: 'Finland', flag: 'flag_images/fi.png'};
var fiji = {name: 'Fiji', flag: 'flag_images/fj.png'};
var falklandislands = {name: 'Falkland Islands', flag: 'flag_images/fk.png'};
var micronesia = {name: 'Micronesia', flag: 'flag_images/fm.png'};
var faroeislands = {name: 'Faroe Islands', flag: 'flag_images/fo.png'};
var france = {name: 'France', flag: 'flag_images/fr.png'};
var gabon = {name: 'Gabon', flag: 'flag_images/ga.png'};
var england = {name: 'England', flag: 'flag_images/gb-eng.png'};
var northernireland = {name: 'Northern Ireland', flag: 'flag_images/gb-nir.png'};
var scotland = {name: 'Scotland', flag: 'flag_images/gb-sct.png'};
var wales = {name: 'Wales', flag: 'flag_images/gb-wls.png'};
var unitedkingdom = {name: 'United Kingdom', flag: 'flag_images/gb.png'};
var grenada = {name: 'Grenada', flag: 'flag_images/gd.png'};
var georgia = {name: 'Georgia', flag: 'flag_images/ge.png'};
var frenchguiana = {name: 'French Guiana', flag: 'flag_images/gf.png'};
var guernsey = {name: 'Guernsey', flag: 'flag_images/gg.png'};
var ghana = {name: 'Ghana', flag: 'flag_images/gh.png'};
var gibraltar = {name: 'Gibraltar', flag: 'flag_images/gi.png'};
var greenland = {name: 'Greenland', flag: 'flag_images/gl.png'};
var gambia = {name: 'Gambia', flag: 'flag_images/gm.png'};
var guinea = {name: 'Guinea', flag: 'flag_images/gn.png'};
var guadeloupe = {name: 'Guadeloupe', flag: 'flag_images/gp.png'};
var equatorialguinea = {name: 'Equatorial Guinea', flag: 'flag_images/gq.png'};
var greece = {name: 'Greece', flag: 'flag_images/gr.png'};
var guatemala = {name: 'Guatemala', flag: 'flag_images/gt.png'};
var guam = {name: 'Guam', flag: 'flag_images/gu.png'};
var guineabissau = {name: 'Guinea Bissau', flag: 'flag_images/gw.png'};
var guyana = {name: 'Guyana', flag: 'flag_images/gy.png'};
var hongkong = {name: 'Hong Kong', flag: 'flag_images/hk.png'};
var honduras = {name: 'Honduras', flag: 'flag_images/hn.png'};
var croatia = {name: 'Croatia', flag: 'flag_images/hr.png'};
var haiti = {name: 'Haiti', flag: 'flag_images/ht.png'};
var hungary = {name: 'Hungary', flag: 'flag_images/hu.png'};
var indonesia = {name: 'Indonesia', flag: 'flag_images/id.png'};
var ireland = {name: 'Ireland', flag: 'flag_images/ie.png'};
var israel = {name: 'Israel', flag: 'flag_images/il.png'};
var isleofman = {name: 'Isle of Man', flag: 'flag_images/im.png'};
var india = {name: 'India', flag: 'flag_images/in.png'};
var iraq = {name: 'Iraq', flag: 'flag_images/iq.png'};
var iran = {name: 'Iran', flag: 'flag_images/ir.png'};
var iceland = {name: 'Iceland', flag: 'flag_images/is.png'};
var italy = {name: 'Italy', flag: 'flag_images/it.png'};
var jersey = {name: 'Jersey', flag: 'flag_images/je.png'};
var jamaica = {name: 'Jamaica', flag: 'flag_images/jm.png'};
var jordan = {name: 'Jordan', flag: 'flag_images/jo.png'};
var japan = {name: 'Japan', flag: 'flag_images/jp.png'};
var kenya = {name: 'Kenya', flag: 'flag_images/ke.png'};
var kyrgyzstan = {name: 'Kyrgyzstan', flag: 'flag_images/kg.png'};
var cambodia = {name: 'Cambodia', flag: 'flag_images/kh.png'};
var kiribati = {name: 'Kiribati', flag: 'flag_images/ki.png'};
var comoros = {name: 'Comoros', flag: 'flag_images/km.png'};
var saintkittsandnevis = {name: 'Saint Kitts and Nevis', flag: 'flag_images/kn.png'};
var northkorea = {name: 'North Korea', flag: 'flag_images/kp.png'};
var southkore = {name: 'South Kore', flag: 'flag_images/kr.png'};
var kuwait = {name: 'Kuwait', flag: 'flag_images/kw.png'};
var caymanislands = {name: 'Cayman Islands', flag: 'flag_images/ky.png'};
var kazakhstan = {name: 'Kazakhstan', flag: 'flag_images/kz.png'};
var laos = {name: 'Laos', flag: 'flag_images/la.png'};
var lebanon = {name: 'Lebanon', flag: 'flag_images/lb.png'};
var saintlucia = {name: 'Saint Lucia', flag: 'flag_images/lc.png'};
var liechtenstein = {name: 'Liechtenstein', flag: 'flag_images/li.png'};
var srilanka = {name: 'Sri Lanka', flag: 'flag_images/lk.png'};
var liberia = {name: 'Liberia', flag: 'flag_images/lr.png'};
var lesotho = {name: 'Lesotho', flag: 'flag_images/ls.png'};
var lithuania = {name: 'Lithuania', flag: 'flag_images/lt.png'};
var luxembourg = {name: 'Luxembourg', flag: 'flag_images/lu.png'};
var latvia = {name: 'Latvia', flag: 'flag_images/lv.png'};
var libya = {name: 'Libya', flag: 'flag_images/ly.png'};
var morocco = {name: 'Morocco', flag: 'flag_images/ma.png'};
var monaco = {name: 'Monaco', flag: 'flag_images/mc.png'};
var moldova = {name: 'Moldova', flag: 'flag_images/md.png'};
var montenegro = {name: 'Montenegro', flag: 'flag_images/me.png'};
var saintmartin = {name: 'Saint Martin', flag: 'flag_images/mf.png'};
var madagascar = {name: 'Madagascar', flag: 'flag_images/mg.png'};
var marshallislands = {name: 'Marshall Islands', flag: 'flag_images/mh.png'};
var northmacedonia = {name: 'North Macedonia', flag: 'flag_images/mk.png'};
var mali = {name: 'Mali', flag: 'flag_images/ml.png'};
var myanmar = {name: 'Myanmar', flag: 'flag_images/mm.png'};
var mongolia = {name: 'Mongolia', flag: 'flag_images/mn.png'};
var macao = {name: 'Macao', flag: 'flag_images/mo.png'};
var northernmarianaislands = {name: 'Northern Mariana Islands', flag: 'flag_images/mp.png'};
var martinique = {name: 'Martinique', flag: 'flag_images/mq.png'};
var mauritania = {name: 'Mauritania', flag: 'flag_images/mr.png'};
var montserrat = {name: 'Montserrat', flag: 'flag_images/ms.png'};
var malta = {name: 'Malta', flag: 'flag_images/mt.png'};
var mauritius = {name: 'Mauritius', flag: 'flag_images/mu.png'};
var maldives = {name: 'Maldives', flag: 'flag_images/mv.png'};
var malawi = {name: 'Malawi', flag: 'flag_images/mw.png'};
var mexico = {name: 'Mexico', flag: 'flag_images/mx.png'};
var malaysia = {name: 'Malaysia', flag: 'flag_images/my.png'};
var mozambique = {name: 'Mozambique', flag: 'flag_images/mz.png'};
var namibia = {name: 'Namibia', flag: 'flag_images/na.png'};
var newcaledonia = {name: 'New Caledonia', flag: 'flag_images/nc.png'};
var niger = {name: 'Niger', flag: 'flag_images/ne.png'};
var norfolkisland = {name: 'Norfolk Island', flag: 'flag_images/nf.png'};
var nigeria = {name: 'Nigeria', flag: 'flag_images/ng.png'};
var nicaragua = {name: 'Nicaragua', flag: 'flag_images/ni.png'};
var netherlands = {name: 'Netherlands', flag: 'flag_images/nl.png'};
var norway = {name: 'Norway', flag: 'flag_images/no.png'};
var nepal = {name: 'Nepal', flag: 'flag_images/np.png'};
var nauru = {name: 'Nauru', flag: 'flag_images/nr.png'};
var niue = {name: 'Niue', flag: 'flag_images/nu.png'};
var newzealand = {name: 'New Zealand', flag: 'flag_images/nz.png'};
var oman = {name: 'Oman', flag: 'flag_images/om.png'};
var panama = {name: 'Panama', flag: 'flag_images/pa.png'};
var peru = {name: 'Peru', flag: 'flag_images/pe.png'};
var frenchpolynesia = {name: 'French Polynesia', flag: 'flag_images/pf.png'};
var papuanewguinea = {name: 'Papua New Guinea', flag: 'flag_images/pg.png'};
var philippines = {name: 'Philippines', flag: 'flag_images/ph.png'};
var pakistan = {name: 'Pakistan', flag: 'flag_images/pk.png'};
var poland = {name: 'Poland', flag: 'flag_images/pl.png'};
var saintpierreandmiquelon = {name: 'Saint Pierre and Miquelon', flag: 'flag_images/pm.png'};
var pitcairn = {name: 'Pitcairn', flag: 'flag_images/pn.png'};
var puertorico = {name: 'Puerto Rico', flag: 'flag_images/pr.png'};
var palestine = {name: 'Palestine', flag: 'flag_images/ps.png'};
var portugal = {name: 'Portugal', flag: 'flag_images/pt.png'};
var palau = {name: 'Palau', flag: 'flag_images/pw.png'};
var paraguay = {name: 'Paraguay', flag: 'flag_images/py.png'};
var qatar = {name: 'Qatar', flag: 'flag_images/qa.png'};
var réunion = {name: 'Réunion', flag: 'flag_images/re.png'};
var romania = {name: 'Romania', flag: 'flag_images/ro.png'};
var serbia = {name: 'Serbia', flag: 'flag_images/rs.png'};
var russianfederation = {name: 'Russia', flag: 'flag_images/ru.png'};
var rwanda = {name: 'Rwanda', flag: 'flag_images/rw.png'};
var saudiarabia = {name: 'Saudi Arabia', flag: 'flag_images/sa.png'};
var solomonislands = {name: 'Solomon Islands', flag: 'flag_images/sb.png'};
var seychelles = {name: 'Seychelles', flag: 'flag_images/sc.png'};
var sudan = {name: 'Sudan', flag: 'flag_images/sd.png'};
var sweden = {name: 'Sweden', flag: 'flag_images/se.png'};
var singapore = {name: 'Singapore', flag: 'flag_images/sg.png'};
var slovenia = {name: 'Slovenia', flag: 'flag_images/si.png'};
var svalbardandjanmayenislands = {name: 'Svalbard and Jan Mayen Islands', flag: 'flag_images/sj.png'};
var slovakia = {name: 'Slovakia', flag: 'flag_images/sk.png'};
var sierraleone = {name: 'Sierra Leone', flag: 'flag_images/sl.png'};
var sanmarino = {name: 'San Marino', flag: 'flag_images/sm.png'};
var senegal = {name: 'Senegal', flag: 'flag_images/sn.png'};
var somalia = {name: 'Somalia', flag: 'flag_images/so.png'};
var suriname = {name: 'Suriname', flag: 'flag_images/sr.png'};
var southsudan = {name: 'South Sudan', flag: 'flag_images/ss.png'};
var saotomeandprincipe = {name: 'Sao Tome and Principe', flag: 'flag_images/st.png'};
var elsalvador = {name: 'El Salvador', flag: 'flag_images/sv.png'};
var syrianarabrepublic = {name: 'Syrian Arab Republic', flag: 'flag_images/sy.png'};
var swaziland = {name: 'Swaziland', flag: 'flag_images/sz.png'};
var chad = {name: 'Chad', flag: 'flag_images/td.png'};
var togo = {name: 'Togo', flag: 'flag_images/tg.png'};
var thailand = {name: 'Thailand', flag: 'flag_images/th.png'};
var tajikistan = {name: 'Tajikistan', flag: 'flag_images/tj.png'};
var tokelau = {name: 'Tokelau', flag: 'flag_images/tk.png'};
var timorleste = {name: 'Timor Leste', flag: 'flag_images/tl.png'};
var turkmenistan = {name: 'Turkmenistan', flag: 'flag_images/tm.png'};
var tunisia = {name: 'Tunisia', flag: 'flag_images/tn.png'};
var tonga = {name: 'Tonga', flag: 'flag_images/to.png'};
var turkey = {name: 'Turkey', flag: 'flag_images/tr.png'};
var trinidadandtobago = {name: 'Trinidad and Tobago', flag: 'flag_images/tt.png'};
var tuvalu = {name: 'Tuvalu', flag: 'flag_images/tv.png'};
var taiwan = {name: 'Taiwan', flag: 'flag_images/tw.png'};
var tanzania = {name: 'Tanzania', flag: 'flag_images/tz.png'};
var ukraine = {name: 'Ukraine', flag: 'flag_images/ua.png'};
var uganda = {name: 'Uganda', flag: 'flag_images/ug.png'};
var unitedstates = {name: 'United States', flag: 'flag_images/us.png'};
var uruguay = {name: 'Uruguay', flag: 'flag_images/uy.png'};
var uzbekistan = {name: 'Uzbekistan', flag: 'flag_images/uz.png'};
var saintvincentandthegrenadines = {name: 'Saint Vincent and the Grenadines', flag: 'flag_images/vc.png'};
var venezuela = {name: 'Venezuela', flag: 'flag_images/ve.png'};
var virginislands = {name: 'Virgin Islands', flag: 'flag_images/vg.png'};
var vietnam = {name: 'Vietnam', flag: 'flag_images/vn.png'};
var vanuatu = {name: 'Vanuatu', flag: 'flag_images/vu.png'};
var wallisandfutunaislands = {name: 'Wallis and Futuna Islands', flag: 'flag_images/wf.png'};
var samoa = {name: 'Samoa', flag: 'flag_images/ws.png'};
var kosovo = {name: 'Kosovo', flag: 'flag_images/xk.png'};
var yemen = {name: 'Yemen', flag: 'flag_images/ye.png'};
var mayotte = {name: 'Mayotte', flag: 'flag_images/yt.png'};
var southafrica = {name: 'South Africa', flag: 'flag_images/za.png'};
var zambia = {name: 'Zambia', flag: 'flag_images/zm.png'};
var zimbabwe = {name: 'Zimbabwe', flag: 'flag_images/zw.png'};
var mode;
var difficulty;

hard1 = [iraq, egypt, yemen, syrianarabrepublic];
hard2 = [monaco, indonesia,poland,austria, latvia]
hard3 = [vietnam, isleofman, china, kyrgyzstan];
hard4 = [hungary, netherlands, luxembourg, paraguay];
hard5 = [romania, chad, andorra, moldova];
hard6 = [hongkong, tunisia, vietnam, isleofman];
hard7 = [syrianarabrepublic, sudan, egypt,libya];
hard8 = [nicaragua, honduras, elsalvador, sierraleone];
hard9 = [venezuela, ecuador,colombia, bolivia];
hard10 = [cotedivoire, ireland, niger, india ]

var passSound = document.getElementById('passSound');
var correctSound = document.getElementById('correctSound');

var survivalHighScore = localStorage.getItem("highscore");

let mute = false;
function toggleMute() {
  passSound.muted = !passSound.muted;
  correctSound.muted = !correctSound.muted;
  mute = !mute;
  if (mute == true) {
    document.getElementById('muteIcon').className = "fa fa-bell-slash";
  } else {
    document.getElementById('muteIcon').className = "fa fa-bell";
  }
}

// hard13 = [china, vietnam, isleofman, morocco];
// hard15 = [honduras, nicaragua, elsalvador, sierraleone];
// hard16 = [hungary, netherlands, yemen, egypt];
// hard17 = [hongkong, tunisia, vietnam, isleofman];
// hard18 = [netherlands, paraguay, hungary, croatia];
// hard19 = [italy, mexico, ireland, saintmartin];
// hard20 = [morocco, china, isleofman, vietnam];
// hard21 = [paraguay, netherlands, croatia, luxembourg];
// hard22 = [elsalvador, nicaragua, honduras, sierraleone];
// hard24 = [russianfederation, bulgaria, slovenia, slovakia];
// hard25 = [kyrgyzstan, vietnam, china, hongkong];
// hard26 = [palestine, westernsahara, jordan, unitedarabemirates];
// hard27 = [finland, unitedkingdom, georgia, guernsey];
// hard29 = [mexico, italy, saintmartin, france];
// hard30 = [senegal, mali, romania, chad];
// hard32 = [ireland, italy, mexico, france];
// hard35 = [bulgaria, russianfederation, slovakia, slovenia];

/* Flag waving animation */
  var h = $('.flag').width();
  for(var i = 0; i < h; i++){
      var flagElement = $("<div class='flag-element'>");
      flagElement.css('background-position', -i + "px 0");
      flagElement.css('-webkit-animation-delay', i * 10 + 'ms');
      flagElement.css('-moz-animation-delay', i * 10 + 'ms');
      flagElement.css('-ms-animation-delay', i * 10 + 'ms');
      flagElement.css('animation-delay', i * 10 + 'ms');
      $('.flag').append(flagElement);
}

document.getElementById('join-button').onclick = function()  {joinScreen();};   

let flags = [];

let allFlags = [
  zimbabwe, zambia, southafrica, yemen, kosovo, samoa, wallisandfutunaislands, vanuatu, vietnam, virginislands, venezuela, saintvincentandthegrenadines, uzbekistan, uruguay, unitedstates, uganda, ukraine, tanzania, taiwan, tuvalu, trinidadandtobago, turkey, tonga, tunisia, turkmenistan, timorleste, tokelau, tajikistan, thailand, togo, chad, swaziland, syrianarabrepublic, elsalvador, saotomeandprincipe, southsudan, suriname, somalia, senegal, sanmarino, sierraleone, slovakia, svalbardandjanmayenislands, slovenia, singapore, sweden, sudan, seychelles, solomonislands, saudiarabia, rwanda, russianfederation, serbia, romania, réunion, qatar, paraguay, palau, portugal, palestine, puertorico, pitcairn, saintpierreandmiquelon, poland, pakistan, philippines, papuanewguinea, frenchpolynesia, peru, panama, oman, newzealand, niue, nauru, nepal, norway, netherlands, nicaragua, nigeria, norfolkisland, niger, newcaledonia, namibia, mozambique, malaysia, mexico, malawi, maldives, mauritius, malta, montserrat, mauritania, martinique, northernmarianaislands, macao, mongolia, myanmar, mali, northmacedonia, marshallislands, madagascar, saintmartin, montenegro, moldova, monaco, morocco, libya, latvia, luxembourg, lithuania, lesotho, liberia, srilanka, liechtenstein, saintlucia, lebanon, laos, kazakhstan, caymanislands, kuwait, southkore, northkorea, saintkittsandnevis, comoros, kiribati, cambodia, kyrgyzstan, kenya, japan, jordan, jamaica, jersey, italy, iceland, iran, iraq, india, isleofman, israel, ireland, indonesia, hungary, haiti, croatia, honduras, hongkong, guyana, guineabissau, guam, guatemala, greece, equatorialguinea, guadeloupe, guinea, gambia, greenland, gibraltar, ghana, guernsey, frenchguiana, georgia, grenada, unitedkingdom, wales, scotland, northernireland, england, gabon, france, faroeislands, micronesia, falklandislands, fiji, finland, europe, ethiopia, spain, eritrea, westernsahara, egypt, estonia, ecuador, algeria, dominicanrepublic, dominica, denmark, djibouti, germany, czechrepublic, cyprus, christmasisland, curaca, capeverde, cuba, costarica, colombia, china, cameroon, chile, cookislands, cotedivoire, switzerland, republicofthecongo, centralafricanrepublic, drc, cocosisland, canada, belize, belarus, botswana, bhutan, bahamas, brazil, caribbeannetherlands, bolivia, brunei, bermuda, saintbarthélemy, benin, burundi, bahrain, bulgaria, burkinafaso, belgium, bangladesh, barbados, bosniaandherzegovina, azerbaijan, faroeislands, aruba, australia, austria, americansamoa, argentina, antarctica, angola, armenia, albania, anguilla, antiguaandbarbuda, afghanistan, unitedarabemirates, andorra 
  ];

let easyFlags = [
unitedkingdom, unitedstates,australia,france,germany,brazil,argentina,canada, spain, mexico, portugal,netherlands, sweden, china, russianfederation,
];

let hardFlags = [
  hard1, hard2,hard3,hard4,hard5,hard6,hard7,hard8,hard9,hard10
]

let usaFlags = [
  unitedstates, unitedstates,unitedstates,unitedstates
];

shuffle(hardFlags);

function joinScreen(){
  document.getElementById("page-splash").style.display = "none";
  document.getElementById("joinScreen").style.display = "block";
  document.getElementById("mode").style.display = "block";
  document.getElementById("difficulty").style.display = "none";
  document.getElementById("fun").style.display = "none";
};

function  joinGameDuel() {
  mode = "duel";
  document.getElementById("mode").style.display = "none";
  document.getElementById("difficulty").style.display = "block";
  document.getElementById("backButton").style.display = "block";
};

function  joinGameSolo() {
  document.getElementById("mode").style.display = "none";
  document.getElementById("soloMode").style.display = "block";
  document.getElementById("backButton").style.display = "block";
};

function  joinGameParty() {
  mode = "party";
  document.getElementById("soloMode").style.display = "none";
  document.getElementById("difficulty").style.display = "block";
  document.getElementById("backButton").style.display = "block";
};

function  joinGameSurvival() {
  mode = "survival";
  flags = allFlags
  document.getElementById("backButton").style.display = "block";
  document.getElementById("soloMode").style.display = "none";
  joinGame();
};

function joinGameEasy() {
  flags = easyFlags;
  difficulty = "easy";
  joinGame();
}

function  joinGameNormal() {
  flags = allFlags;
  difficulty = "normal";
  joinGame();
};

function joinGameCryptic(){
  flags = allFlags;
  difficulty = "cryptic";
  document.getElementById('flag').classList.add("invert");
  document.getElementById('pflag').classList.add("invert");
  joinGame();
}

function joinGameHard(){
    shuffle(hardFlags);
    flags = hardFlags[0];
  difficulty = "hard";
  joinGame();
}

function joinGameUSA(){
  flags = usaFlags;
  difficulty = "usa";
  joinGame();
}

function  joinGameBruce() {
  flags = allFlags;
  difficulty = "bruce";
  joinGame();
};

function joinGameFun(){
  document.getElementById("difficulty").style.display = "none";
  document.getElementById("fun").style.display = "block";
  document.getElementById("backButton").style.display = "block";
}

function  joinGame() {
  survivalScore = 0;
  partyRound = 0;
  partyScore = 0;
  document.getElementById("joinScreen").style.display = "none";
  if (mode==="duel"){
  document.getElementById("gameStart").style.display = "block"; 
  document.getElementById("instructions").style.display = "block";
  document.getElementById("backButton").style.display = "none";
  flagDirection();
  } else if (mode==="party"){
    document.getElementById("gameStartParty").style.display = "block"; 
    document.getElementById("pinstructions").style.display = "block";
    document.getElementById("toggleMute").style.display = "block";
  }
  else if (mode==="survival"){
    document.getElementById("gameStartSurvival").style.display = "block"; 
    document.getElementById("sinstructions").style.display = "block";
    document.getElementById("toggleMute").style.display = "block";
    if (survivalHighScore > 0){
      document.getElementById("showCurrentHighScore").innerHTML = "High score: "+survivalHighScore
    }
  }
  shuffle(flags);
  };

function shuffle(arra1) {
    var ctr = arra1.length, temp, index;
// While there are elements in the array
    while (ctr > 0) {
// Pick a random index
        index = Math.floor(Math.random() * ctr);
// Decrease ctr by 1
        ctr--;
// And swap the last element with it
        temp = arra1[ctr];
        arra1[ctr] = arra1[index];
        arra1[index] = temp;
    } return arra1;
};

function generateAnswer(min, max) { // min and max included 
  return Math.floor(Math.random() * (max - min + 1) + min)
}
var answer = generateAnswer(0, 3);

//Flag upside down or not
function flagDirection() {
 if (rand = Math.random() < 0.5)
 {
  document.getElementById('flag').classList.toggle("upside");
 }
};

var flag1 = flags[0];
var flag2 = flags[1];
var flag3 = flags[2];
var flag4 = flags[3];

// var timer;
var count = 2;

function  startGameRegular(){
  flag1 = flags[0];
  flag2 = flags[1];
  flag3 = flags[2];
  flag4 = flags[3];
  document.getElementById('1-1').innerHTML =  flag1.name;  
  document.getElementById('2-1').innerHTML =  flag1.name; 
  document.getElementById('1-2').innerHTML =  flag2.name;  
  document.getElementById('2-2').innerHTML =  flag2.name; 
  document.getElementById('1-3').innerHTML =  flag3.name;  
  document.getElementById('2-3').innerHTML =  flag3.name; 
  document.getElementById('1-4').innerHTML =  flag4.name;  
  document.getElementById('2-4').innerHTML =  flag4.name;  
  document.getElementById("flag").src=  flags[answer].flag;
  document.getElementById("flag").style.display = "block";
  document.getElementById("countdown").style.display = "none";
};

function gameStart()  {
  document.getElementById("instructions").style.display = "none";
  document.getElementById("duelBack").style.display = "none";
  document.getElementById("countdown").style.display = "block";
  var timer  = setInterval(function() {
    // startGameTimer(count);
    if(count === 0) {
      clearInterval(timer);
      startGameRegular();
      enablep1();
      enablep2();
      return;
    } else {
      $('#countdown').html(count);
      count--;
    }
  }, 1000);
};   

function gameStartParty(){
  document.getElementById("toggleMute").style.display = "none";
  document.getElementById("pinstructions").style.display = "none";
  document.getElementById("pScore").style.display="flex";
  document.getElementById("backButton").style.display = "none";
  flag1 = flags[0];
  flag2 = flags[1];
  flag3 = flags[2];
  flag4 = flags[3];
  document.getElementById('p1').innerHTML =  flag1.name; 
  document.getElementById('p2').innerHTML =  flag2.name; 
  document.getElementById('p3').innerHTML =  flag3.name; 
  document.getElementById('p4').innerHTML =  flag4.name;  
  document.getElementById("pflag").src=  flags[answer].flag;
  document.getElementById("pflag").style.display = "block";
  document.getElementById("p1").disabled = false;
  document.getElementById("p2").disabled = false;
  document.getElementById("p3").disabled = false;
  document.getElementById("p4").disabled = false;
}

function gameStartSurvival(){
  document.getElementById("toggleMute").style.display = "none";
  document.getElementById("sinstructions").style.display = "none";
  document.getElementById("survivalBack").style.display = "none";
  document.getElementById("sScore").style.display="flex";
  document.getElementById("sflag").src=  flags[answer].flag;
  document.getElementById("sflag").style.display = "block";
  flag1 = flags[0];
  flag2 = flags[1];
  flag3 = flags[2];
  flag4 = flags[3];
  document.getElementById('s1').innerHTML =  flag1.name; 
  document.getElementById('s2').innerHTML =  flag2.name; 
  document.getElementById('s3').innerHTML =  flag3.name; 
  document.getElementById('s4').innerHTML =  flag4.name;  
  document.getElementById("s1").disabled = false;
  document.getElementById("s2").disabled = false;
  document.getElementById("s3").disabled = false;
  document.getElementById("s4").disabled = false;
}


// Duel mode user answers
document.getElementById('2-1').onclick = function()  {p2Guessed(0);};   
document.getElementById('2-2').onclick = function()  {p2Guessed(1);};   
document.getElementById('2-3').onclick = function()  {p2Guessed(2);};   
document.getElementById('2-4').onclick = function()  {p2Guessed(3);};   

document.getElementById('1-1').onclick = function()  {p1Guessed(0);};   
document.getElementById('1-2').onclick = function()  {p1Guessed(1);};   
document.getElementById('1-3').onclick = function()  {p1Guessed(2);};   
document.getElementById('1-4').onclick = function()  {p1Guessed(3);};   

function p1Guessed(guess) {

  if (guess === answer || difficulty === "usa"){
    disablep1();
    disablep2();
    document.getElementById('endSplash').classList.add("upside");
    document.getElementById('endSplash').classList.add("top");
    document.getElementById('endSplashLose').classList.add("bottom");
    document.getElementById('endSplashLose').style.display="block";
    document.getElementById('endSplash').style.display="block";
    document.getElementById('endSplashLose').style.display="block";
    document.getElementById('roundEnd').style.display="block";
    document.getElementById('answer').innerHTML = flags[answer].name;
     document.getElementById('gameStart').style.display="none";
     if (difficulty === "bruce") {
      bruceEndSplash();
      passSound.play();
      document.getElementById("endSplashButton").style.display="block";
    } else {
      document.getElementById("confetti").style.display="block";
      setTimeout(function(){ 
        document.getElementById("confetti").style.display="none";
        document.getElementById("endSplashButton").style.display="block";
      }, 5000);
      document.getElementById('correctSound').play();
      var animConfetti = bodymovin.loadAnimation({
        wrapper: confetti,
        animType: 'svg',
        loop: true,
        path: 'public/confetti.json'
    });
    }
  }
  else 
  {
    passSound.play();
    disablep1();
    enablep2();
  }
}

function p2Guessed(guess) {
  if (guess === answer || difficulty === "usa"){
    disablep1();
    disablep2();
    document.getElementById('endSplash').classList.add("bottom");
    document.getElementById('endSplash').style.display="block";
    document.getElementById('endSplashLose').classList.add("upside");
    document.getElementById('endSplashLose').classList.add("top");
    document.getElementById('endSplashLose').style.display="block";
    document.getElementById('roundEnd').style.display="block";
    document.getElementById('answer').innerHTML = flags[answer].name;
    document.getElementById('gameStart').style.display="none";
    if (difficulty === "bruce") {
      bruceEndSplash();
      document.getElementById('passSound').play();
      document.getElementById("endSplashButton").style.display="block";
    } else {
      document.getElementById("confetti").style.display="block";
      setTimeout(function(){ 
        document.getElementById("confetti").style.display="none";
        document.getElementById("endSplashButton").style.display="block";
      }, 5000);
      document.getElementById('correctSound').play();
      var animConfetti = bodymovin.loadAnimation({
        wrapper: confetti,
        animType: 'svg',
        loop: true,
        path: 'public/confetti.json'
    });
    }
  }
  else {
    document.getElementById('passSound').play();
    disablep2();
    enablep1();
  }
}

partyRound = 0;
roundId = "ps" + partyRound
partyScore = 0;
survivalScore = 0;

// Party mode user answers
document.getElementById('p1').onclick = function()  {partyGuessed(0);};   
document.getElementById('p2').onclick = function()  {partyGuessed(1);};   
document.getElementById('p3').onclick = function()  {partyGuessed(2);};   
document.getElementById('p4').onclick = function()  {partyGuessed(3);};

function partyGuessed(guess) {
  partyRound++;
  roundId = "ps" + partyRound
  shuffle(flags);
  disableParty();
  if (answer===0) {
    document.getElementById('p1').className = "gameButtons rightAnswer";
  }
  if (answer===1) {
    document.getElementById('p2').className = "gameButtons rightAnswer";
  }
  if (answer===2) {
    document.getElementById('p3').className = "gameButtons rightAnswer";
  }
  if (answer===3) {
    document.getElementById('p4').className = "gameButtons rightAnswer";
  }
  if (difficulty === "bruce") {
    document.getElementById('passSound').play();
    document.getElementById(roundId).className = "cross";
  } else 
  if (guess === answer || difficulty === "usa"){
    partyScore++;
    document.getElementById(roundId).className = "tick";
    document.getElementById('correctSound').play();
    if (difficulty==="hard") {
      flags=hardFlags[partyRound-1];
    } 
  }
  else 
  {
    document.getElementById(roundId).className = "cross";
    if (guess===0) {
      document.getElementById('p1').className = "gameButtons wrongAnswer";
    }
    if (guess===1) {
      document.getElementById('p2').className = "gameButtons wrongAnswer";
    }
    if (guess===2) {
      document.getElementById('p3').className = "gameButtons wrongAnswer";
    }
    if (guess===3) {
      document.getElementById('p4').className = "gameButtons wrongAnswer";
    }
    if (difficulty==="hard") {
      flags=hardFlags[partyRound-1];
    } 
    document.getElementById('passSound').play();
  }
    if (difficulty==="usa"){
      document.getElementById("p1").className = "gameButtons rightAnswer"; 
      document.getElementById("p2").className = "gameButtons rightAnswer"; 
      document.getElementById("p3").className = "gameButtons rightAnswer"; 
      document.getElementById("p4").className = "gameButtons rightAnswer"; 
    }
  answer = generateAnswer(0, 3);
  setTimeout(function(){ 
  if (partyRound === 10) {
    partyRound=1;
    showScores();
    document.getElementById("gameStartParty").style.display="none";
    document.getElementById("roundEndParty").style.display="block";
    document.getElementById("fireworks").style.display="block";
    setTimeout(function(){ 
      document.getElementById("fireworks").style.display="none";
      document.getElementById("endSplashButtonParty").style.display="block";
      document.getElementById("toggleMute").style.display = "none";
    }, 5000);
    var animFireworks = bodymovin.loadAnimation({
      wrapper: fireworks,
      animType: 'svg',
      loop: true,
      path: 'public/fireworks.json'
    });
  } 
  gameStartParty();
  enableParty();
  document.getElementById('p1').className = "gameButtons";
  document.getElementById('p2').className = "gameButtons";
  document.getElementById('p3').className = "gameButtons";
  document.getElementById('p4').className = "gameButtons";
  }, 3000); 
};

document.getElementById('s1').onclick = function()  {survivalGuessed(0);};   
document.getElementById('s2').onclick = function()  {survivalGuessed(1);};   
document.getElementById('s3').onclick = function()  {survivalGuessed(2);};   
document.getElementById('s4').onclick = function()  {survivalGuessed(3);};

function survivalGuessed(guess) {
  if (survivalScore > 10 && generateAnswer(0,6) === 0) {
    console.log("hard");
    shuffle(hardFlags);
    flags = hardFlags[0];
  } else {
    flags = allFlags
    shuffle(flags);
  };
  disableParty();
  if (answer===0) {
    document.getElementById('s1').className = "gameButtons rightAnswer";
  }
  if (answer===1) {
    document.getElementById('s2').className = "gameButtons rightAnswer";
  }
  if (answer===2) {
    document.getElementById('s3').className = "gameButtons rightAnswer";
  }
  if (answer===3) {
    document.getElementById('s4').className = "gameButtons rightAnswer";
  }
  if (guess === answer || difficulty === "usa"){
    survivalScore++;
    document.getElementById('correctSound').play();
  }
  else 
  {
    if (guess===0) {
      document.getElementById('s1').className = "gameButtons wrongAnswer";
    }
    if (guess===1) {
      document.getElementById('s2').className = "gameButtons wrongAnswer";
    }
    if (guess===2) {
      document.getElementById('s3').className = "gameButtons wrongAnswer";
    }
    if (guess===3) {
      document.getElementById('s4').className = "gameButtons wrongAnswer";
    }
    document.getElementById('passSound').play();
    //exit here for survival mode
    setTimeout(function(){
      showScores();
      document.getElementById("gameStartSurvival").style.display="none";
      document.getElementById("sflag").style.display="none";
      document.getElementById("roundEndParty").style.display="block";
      document.getElementById("fireworks").style.display="block";
      setTimeout(function(){ 
        document.getElementById("fireworks").style.display="none";
        document.getElementById("endSplashButtonParty").style.display="block";
      }, 5000);
      var animFireworks = bodymovin.loadAnimation({
        wrapper: fireworks,
        animType: 'svg',
        loop: true,
        path: 'public/fireworks.json'
      });
    },3000);
  }
  answer = generateAnswer(0, 3);
  document.getElementById("currentSurvivalScore").innerHTML = survivalScore;
  setTimeout(function(){ 
  gameStartSurvival();
  enableParty();
  document.getElementById('s1').className = "gameButtons";
  document.getElementById('s2').className = "gameButtons";
  document.getElementById('s3').className = "gameButtons";
  document.getElementById('s4').className = "gameButtons";
  }, 3000); 
};

function showScores(){
  if (mode === "party") {
    document.getElementById("pwinText").innerHTML = partyScore+"/10";
    if (difficulty==="bruce"){
      document.getElementById("pBruce").innerHTML = "It doesn't matter what you scored, Bruce beat you.";
    }
    if (partyScore === 0) {
      document.getElementById("partyText").innerHTML = "Ouch";
    } else 
    if (partyScore < 3) {
      document.getElementById("partyText").innerHTML = "Try harder";
    } else 
    if (partyScore < 5) {
      document.getElementById("partyText").innerHTML = "Not bad";
    } else 
    if (partyScore < 7) {
      document.getElementById("partyText").innerHTML = "Good effort";
    } else 
    if (partyScore < 8) {
      document.getElementById("partyText").innerHTML = "Well done!";
    } else 
    if (partyScore === 9) {
      document.getElementById("partyText").innerHTML = "Excellent";
    } else 
    if (partyScore === 10) {
      document.getElementById("partyText").innerHTML = "Perfect";
    }
  } else
  if (mode === "survival") {
    document.getElementById("pwinText").innerHTML = survivalScore;
    if (survivalScore === 0){
      document.getElementById("partyText").innerHTML = "Ouch";
    } else if (survivalScore > survivalHighScore || survivalHighScore === null) {
      document.getElementById("partyText").innerHTML = "New high score!";
      localStorage.setItem("highscore", survivalScore);
      survivalHighScore = survivalScore
    } else if (survivalScore == survivalHighScore) {
      document.getElementById("partyText").innerHTML = "Joint high score"; 
    }
    else {
      document.getElementById("partyText").innerHTML = "High score: "+survivalHighScore;
    }
  }
}


function disablep1() {
  document.getElementById("1-1").disabled = true;
  document.getElementById("1-2").disabled = true;
  document.getElementById("1-3").disabled = true;
  document.getElementById("1-4").disabled = true;
};

function disablep2() {
  document.getElementById("2-1").disabled = true;
  document.getElementById("2-2").disabled = true;
  document.getElementById("2-3").disabled = true;
  document.getElementById("2-4").disabled = true;
};

function enablep1() {
  document.getElementById("1-1").disabled = false;
  document.getElementById("1-2").disabled = false;
  document.getElementById("1-3").disabled = false;
  document.getElementById("1-4").disabled = false;
};

function enablep2() {
  document.getElementById("2-1").disabled = false;
  document.getElementById("2-2").disabled = false;
  document.getElementById("2-3").disabled = false;
  document.getElementById("2-4").disabled = false;
};

function disableParty() {
  document.getElementById("p1").disabled = true;
  document.getElementById("p2").disabled = true;
  document.getElementById("p3").disabled = true;
  document.getElementById("p4").disabled = true;
  document.getElementById("s1").disabled = true;
  document.getElementById("s2").disabled = true;
  document.getElementById("s3").disabled = true;
  document.getElementById("s4").disabled = true;
};

function enableParty() {
  document.getElementById("p1").disabled = false;
  document.getElementById("p2").disabled = false;
  document.getElementById("p3").disabled = false;
  document.getElementById("p4").disabled = false;
  document.getElementById("s1").disabled = false;
  document.getElementById("s2").disabled = false;
  document.getElementById("s3").disabled = false;
  document.getElementById("s4").disabled = false;
};

function bruceEndSplash(){
  document.getElementById('winText').innerHTML =  "You lost. Bruce makes the decision"; 
  document.getElementById('loseText').innerHTML =  "You lost. Bruce makes the decision";
  document.getElementById('endSplash').classList.add("lose");
}

function resetGame() {
  document.getElementById("backButton").style.display = "none";
  document.getElementById('roundEnd').style.display = "none";
  document.getElementById('roundEndParty').style.display = "none";
  document.getElementById("gameStartSurvival").style.display = "none";
  document.getElementById("gameStartParty").style.display="none";
  document.getElementById("endSplashButton").style.display="none";
  document.getElementById("gameStart").style.display="none";
  document.getElementById('endSplashLose').className = "endSplash lose";
  document.getElementById('endSplash').className = "endSplash";
  document.getElementById('flag').className = "gameImg";
  document.getElementById('pflag').className = "gameImg";
  document.getElementById('1-1').innerHTML =  "";  
  document.getElementById('2-1').innerHTML =  ""; 
  document.getElementById('1-2').innerHTML =  "";  
  document.getElementById('2-2').innerHTML =  ""; 
  document.getElementById('1-3').innerHTML =  "";  
  document.getElementById('2-3').innerHTML =  ""; 
  document.getElementById('1-4').innerHTML =  "";  
  document.getElementById('2-4').innerHTML =  "";  
  document.getElementById('p1').innerHTML =  "";  
  document.getElementById('p2').innerHTML =  ""; 
  document.getElementById('p3').innerHTML =  "";  
  document.getElementById('p4').innerHTML =  ""; 
  document.getElementById('s1').innerHTML =  "";  
  document.getElementById('s2').innerHTML =  ""; 
  document.getElementById('s3').innerHTML =  "";  
  document.getElementById('s4').innerHTML =  ""; 
  document.getElementById("ps1").className = "noanswer";
  document.getElementById("ps2").className = "noanswer";
  document.getElementById("ps3").className = "noanswer";
  document.getElementById("ps4").className = "noanswer";
  document.getElementById("ps5").className = "noanswer";
  document.getElementById("ps6").className = "noanswer";
  document.getElementById("ps7").className = "noanswer";
  document.getElementById("ps8").className = "noanswer";
  document.getElementById("ps9").className = "noanswer";
  document.getElementById("ps10").className = "noanswer";
  document.getElementById("pScore").style.display="none";
  document.getElementById("currentSurvivalScore").innerHTML = "";
  document.getElementById("countdown").innerHTML = "3";
  document.getElementById("toggleMute").style.display = "none";
  document.getElementById("duelBack").style.display = "block";
  document.getElementById("soloMode").style.display = "none";
  document.getElementById("flag").style.display = "none";
  document.getElementById("pflag").style.display = "none";
  document.getElementById("sflag").style.display = "none";
  document.getElementById("fireworks").style.display="none";
  document.getElementById("toggleMute").style.display = "none";
  document.getElementById("endSplashButtonParty").style.display="none";
  partyRound=1;
  joinScreen();
  disablep1();
  disablep2();
  disableParty();
  count = 2;
  flags=allFlags;
  document.getElementById('winText').innerHTML =  "You win."; 
  document.getElementById('loseText').innerHTML =  "You lost.";
  partyScore=0;
  partyRound=0;
  survivalScore=0;
};